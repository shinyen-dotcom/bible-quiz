<!DOCTYPE html>
<html lang="zh-Hans">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å½¼å¾—å‰ä¹¦ ç¬¬äºŒç«  40 é¢˜æµ‹éªŒ (æ´»çŸ³ä¸å›å°Šçš„ç¥­å¸)</title>
    <style>
        /* CSS æ ·å¼ */
        body { font-family: "Microsoft YaHei", sans-serif; line-height: 1.6; padding: 20px; background-color: #f4f7f6; }
        .container { max-width: 1200px; margin: auto; background: white; padding: 30px; border-radius: 10px; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); }
        h1, h2 { color: #2c3e50; border-bottom: 3px solid #3498db; padding-bottom: 5px; margin-top: 35px; }
        ol { padding-left: 20px; }
        li { margin-bottom: 25px; border-bottom: 1px dashed #eee; padding-bottom: 15px; list-style: decimal; }
        .question-item { display: flex; flex-direction: column; }
        .question-text { font-weight: bold; margin-bottom: 10px; color: #333; }
        .choices, .true-false { margin-bottom: 5px; display: flex; flex-wrap: wrap; }
        .choices label, .true-false label { margin-right: 25px; cursor: pointer; display: inline-block; padding: 5px 0; }
        .result-area { display: flex; align-items: flex-start; margin-top: 5px; min-height: 25px;}
        .result { font-weight: bold; margin-right: 10px; min-width: 30px; text-align: left; font-size: 1.2em;}
        .correct { color: #27ae60; }
        .incorrect { color: #e74c3c; }
        .answer-prompt { font-size: 0.95em; color: #555; background-color: #f9f9f9; padding: 5px; border-radius: 3px;}
        /* Matching Table Styles */
        table { width: 100%; border-collapse: collapse; margin-top: 20px; table-layout: fixed; }
        th, td { padding: 12px; text-align: left; border: 1px solid #ddd; vertical-align: top; font-size: 0.95em; }
        th { background-color: #eaf2f8; color: #34495e; font-weight: bold; }
        .matching-row td:nth-child(2) { font-weight: 500; }
        select { padding: 8px; border-radius: 4px; border: 1px solid #ccc; width: 100%; box-sizing: border-box; background-color: #fff; }
        .matching-row td:nth-child(4) { width: 30%; }
        .score-button { background-color: #3498db; color: white; padding: 12px 25px; border: none; border-radius: 5px; cursor: pointer; font-size: 1.1em; margin-top: 30px; display: block; width: 100%; transition: background-color 0.3s; }
        .score-button:hover { background-color: #2980b9; }
        #score-summary { margin-top: 30px; padding: 20px; border: 2px solid #2ecc71; background-color: #e8f8f5; border-radius: 5px; font-size: 1.3em; font-weight: bold; display: none; text-align: center;}
    </style>
</head>
<body>

<div class="container">
    <h1>ğŸ“ å½¼å¾—å‰ä¹¦ ç¬¬äºŒç« ï¼šæ´»çŸ³ä¸å›å°Šçš„ç¥­å¸ (40 é¢˜æµ‹éªŒ)</h1>
    <p>æœ¬æµ‹éªŒå†…å®¹å®Œå…¨æ ¹æ®æ‚¨ä¸Šä¼ çš„æ–‡ä»¶ç”Ÿæˆï¼Œå…± 40 é¢˜ï¼Œæä¾›å³æ—¶åé¦ˆã€‚</p>

    <form id="quiz-form">
        
        <h2>I. Multiple Choices (é€‰æ‹©é¢˜) - 10 é¢˜</h2>
        <ol id="mc-list"></ol>
        
        <h2>II. True/False (æ˜¯éé¢˜) - 10 é¢˜</h2>
        <ol id="tf-list"></ol>

        <h2>III. Matching Concepts (æ¦‚å¿µé…å¯¹) - 10 é¢˜</h2>
        <p>è¯·å°†å·¦æ çš„ç»æ–‡æ¦‚å¿µä¸å³æ çš„å…³é”®è¯æˆ–è¡¥å……å¥é…å¯¹ã€‚</p>
        <table>
            <thead>
                <tr>
                    <th style="width: 5%;">#</th>
                    <th style="width: 35%;">å·¦æ  (ç»æ–‡æ¦‚å¿µ)</th>
                    <th style="width: 30%;">é€‰æ‹©é…å¯¹</th>
                    <th style="width: 30%;">è¯„åˆ† & æ­£ç¡®ç­”æ¡ˆ</th>
                </tr>
            </thead>
            <tbody id="matching-body-1"></tbody>
        </table>
        
        <h2>IV. Matching the Correct Scripture (ç»æ–‡æ‹†åˆ†é…å¯¹) - 10 é¢˜</h2>
        <p>è¯·å°†å·¦æ çš„ç»æ–‡å‰åŠéƒ¨åˆ†ä¸å³æ çš„ç»æ–‡ååŠéƒ¨åˆ†é…å¯¹ï¼Œç»„æˆå®Œæ•´çš„ç»æ–‡ã€‚</p>
        <table>
            <thead>
                <tr>
                    <th style="width: 5%;">#</th>
                    <th style="width: 35%;">å·¦æ  (ç»æ–‡å‰åŠå¥)</th>
                    <th style="width: 30%;">é€‰æ‹©é…å¯¹</th>
                    <th style="width: 30%;">è¯„åˆ† & æ­£ç¡®ç­”æ¡ˆ</th>
                </tr>
            </thead>
            <tbody id="matching-body-2"></tbody>
        </table>

        <button type="button" class="score-button" onclick="showFinalScore()">æ˜¾ç¤ºæœ€ç»ˆåˆ†æ•°</button>
    </form>

    <div id="score-summary"></div>

</div>

<script>
    // --- ç­”æ¡ˆé”® & æ•°æ®ç»“æ„ (åŸºäºä¸Šä¼ æ–‡ä»¶å†…å®¹) ---
    // æ‰€æœ‰æ•°æ®å·²é‡æ–°æ ¸å¯¹å¹¶ç¡®ä¿ä¸PDFå†…å®¹å®Œå…¨ä¸€è‡´ã€‚

    // 1. Multiple Choice Data (10 é¢˜)
    const mc_questions_data = [
        { id: 'mc_1', text: 'å½¼å¾—åŠå‹‰ä¿¡å¾’è¦è„±å»å„ç§æ¶è¡Œ,åŒ…æ‹¬å“ªäº”é¡¹?', answer: 'B', options: { A: 'å«‰å¦’ã€çº·äº‰ã€é†‰é…’ã€èµŒåšã€è¡Œé‚ªæœ¯', B: 'ä¸€åˆ‡çš„æ¶æ¯’ã€è¯¡è¯ˆã€å‡å–„ã€å«‰å¦’å’Œä¸€åˆ‡æ¯è°¤çš„è¯', C: 'æ¼æ€’ã€æ±¡ç§½çš„è¨€è¯­ã€ä¸æ´çš„ç§æ¬²ã€å·çªƒã€è¯´è°', D: 'éª„å‚²ã€è´ªå©ªã€æ·«ä¹±ã€æ‹œå¶åƒã€å¥½è‰²' } },
        { id: 'mc_2', text: 'ä¿¡å¾’åƒæ‰ç”Ÿçš„å©´å­©çˆ±æ…•å¥¶ä¸€æ ·,è¦çˆ±æ…•ä»€ä¹ˆ?', answer: 'C', options: { A: 'ç¥çš„çˆ±', B: 'åŸºç£çš„å®è¡€', C: 'çº¯å‡€çš„çµå¥¶', D: 'åœ£çµçš„æ„ŸåŠ¨' } },
        { id: 'mc_3', text: 'ä¿¡å¾’è¢«ä¸»æ¥çº³,æ˜¯ä½œä»€ä¹ˆç”¨é€”?', answer: 'A', options: { A: 'å±çµçš„å®«æ®¿,ä½œåœ£æ´çš„ç¥­å¸', B: 'å»ºé€ è£è€€çš„åœ£æ®¿,ä½œä¼ ç¦éŸ³çš„å·¥äºº', C: 'åŸºç£çš„æˆ˜å£«,ä½œå¿ å¿ƒçš„ä»†äºº', D: 'æ•™ä¼šçš„åŸºçŸ³,ä½œå…¬ä¹‰çš„æ³•å®˜' } },
        { id: 'mc_4', text: 'è®ºåˆ°ä¸»è€¶ç¨£åŸºç£,ä»–åœ¨ä¸–äººçœ¼ä¸­æ˜¯â€œæ‰€å¼ƒçš„çŸ³å¤´â€,ä½†åœ¨ç¥çœ‹æ¥æ˜¯ä»€ä¹ˆ?', answer: 'B', options: { A: 'å®¡åˆ¤çš„çŸ³å¤´', B: 'æˆ¿è§’çš„å¤´å—çŸ³å¤´,æ˜¯å®è´µçš„', C: 'ç»Šè„šçš„çŸ³å¤´', D: 'è¯•éªŒçš„çŸ³å¤´' } },
        { id: 'mc_5', text: 'ä¿¡å¾’å› ç€ä¿¡é ä¸»è€¶ç¨£,æ‰€å¾—çš„èº«ä»½æ˜¯å“ªå››é‡ç§°è°“?', answer: 'C', options: { A: 'å¤©å›½çš„å…¬æ°‘ã€æ•™ä¼šçš„æŸ±çŸ³ã€å…‰æ˜çš„å„¿å¥³ã€ä¸»çš„é—¨å¾’', B: 'åœ£æ´çš„å­æ°‘ã€å¤§èƒ½çš„å‹‡å£«ã€æ¸©æŸ”çš„ç‰§è€…ã€ä¸–ä¸Šçš„å…‰', C: 'è¢«æ‹£é€‰çš„æ—ç±»ã€å›å°Šçš„ç¥­å¸ã€åœ£æ´çš„å›½åº¦ã€å±ç¥çš„å­æ°‘', D: 'ç¦éŸ³çš„ä½¿è€…ã€å’Œå¹³çš„ç¼”é€ è€…ã€æ°¸ç”Ÿçš„ç»§æ‰¿è€…ã€åŸºç£çš„æ–°å¦‡' } },
        { id: 'mc_6', text: 'ä¿¡å¾’åº”å½“ç¦æˆ’çš„æ˜¯ä»€ä¹ˆ?', answer: 'B', options: { A: 'å±åœ°çš„è´¢å¯Œ', B: 'å±è‚‰ä½“çš„ç§æ¬²', C: 'å±ä¸–çš„å®´ä¹', D: 'å±çµçš„éª„å‚²' } },
        { id: 'mc_7', text: 'ä¿¡å¾’åœ¨æ•™å¤–äººä¸­åº”å½“æœ‰ä»€ä¹ˆæ ·çš„å“è¡Œ?', answer: 'C', options: { A: 'æ™ºæ…§è°¦å‘', B: 'è¯šå®å®ˆä¿¡', C: 'ç«¯æ­£å–„è‰¯', D: 'å‹‡æ•¢æ— ç•' } },
        { id: 'mc_8', text: 'å½¼å¾—åŠå‹‰ä¿¡å¾’,è¦ä¸ºå“ªä¸‰ç±»äººæœä»äººçš„ä¸€åˆ‡åˆ¶åº¦?(å®é™…æ˜¯é—®åŸå› )', answer: 'B', options: { A: 'ä¸ºç¦éŸ³çš„ç¼˜æ•…', B: 'ä¸ºä¸»çš„ç¼˜æ•…', C: 'ä¸ºè‡ªå·±çš„ç›Šå¤„', D: 'ä¸ºåœ£æ´çš„ç¼˜æ•…' } },
        { id: 'mc_9', text: 'ä»†äººå—è‹¦,è‹¥æ˜¯å› ä¸ºè¡Œå–„è€Œå¿è€,åœ¨ç¥çœ‹æ¥æ˜¯æ€æ ·çš„?', answer: 'C', options: { A: 'å¯æ€œçš„', B: 'ä¸å€¼å¾—çš„', C: 'å¯å–œçˆ±çš„', D: 'å¯ç§°èµçš„' } },
        { id: 'mc_10', text: 'åŸºç£åœ¨åå­—æ¶ä¸Šäº²è‡ªæ‹…å½“äº†æˆ‘ä»¬çš„ç½ª,ç›®çš„æ˜¯ä»€ä¹ˆ?', answer: 'B', options: { A: 'å«æˆ‘ä»¬æ‘†è„±ç–¾ç—…', B: 'å«æˆ‘ä»¬å‘ç½ªæ­»,å‘ä¹‰æ´»', C: 'å«æˆ‘ä»¬å¾—ç€å±çµçš„çŸ¥è¯†', D: 'å«æˆ‘ä»¬å¾—äº«å¹³å®‰' } }
    ];

    // 2. True/False Data (10 é¢˜)
    const tf_questions_data = [
        { id: 'tf_1', text: 'ä¿¡å¾’åº”è¯¥åƒæ‰ç”Ÿçš„å©´å­©çˆ±æ…•çº¯å‡€çš„çµå¥¶,ç›®çš„æ˜¯å¿«å¿«é•¿å¤§,å¾—ç€æ•‘æ©ã€‚', answer: 'F', hint: '(ç›®çš„æ˜¯å«ä½ ä»¬å› æ­¤æ¸é•¿,ä»¥è‡´å¾—æ•‘ï¼Œå¹¶éå¿«å¿«é•¿å¤§)' },
        { id: 'tf_2', text: 'ä¸»è€¶ç¨£åŸºç£æ˜¯æˆ¿è§’çš„å¤´å—çŸ³å¤´,æ‰€ä»¥å‡¡ä¿¡é ä»–çš„äººå¿…ä¸è‡³äºç¾æ„§ã€‚', answer: 'T' },
        { id: 'tf_3', text: 'å¯¹é‚£ä¸ä¿¡çš„äººæ¥è¯´,åŸºç£æ˜¯ç»Šè„šçš„çŸ³å¤´,è·Œäººçš„ç£çŸ³ã€‚', answer: 'T' },
        { id: 'tf_4', text: 'ä¿¡å¾’æ˜¯â€œè¢«æ‹£é€‰çš„æ—ç±»â€,ç›®çš„æ˜¯è¦å®£æ‰¬é‚£å¬ä»–ä»¬å‡ºé»‘æš—ã€å…¥å¥‡å¦™å…‰æ˜è€…çš„ç¾å¾·ã€‚', answer: 'T' },
        { id: 'tf_5', text: 'ä¿¡å¾’ä½œä¸»çš„ä»†äºº,å¯ä»¥åˆ©ç”¨è‡ªç”±ä½œä¸ºé®ç›–æ¶æ¯’çš„è—‰å£ã€‚', answer: 'F', hint: '(â€œä¸å¯è—‰ç€è‡ªç”±é®ç›–æ¶æ¯’â€)' },
        { id: 'tf_6', text: 'å½¼å¾—æ•™å¯¼ä»†äººåªè¦æœä»å–„è‰¯æ¸©å’Œçš„ä¸»äºº,ä¸å¿…æœä»é‚£ä¹–åƒ»çš„ã€‚', answer: 'F', hint: '(ä¸ä½†æœä»å–„è‰¯æ¸©å’Œçš„,å°±æ˜¯é‚£ä¹–åƒ»çš„ä¹Ÿè¦æœä»)' },
        { id: 'tf_7', text: 'åŸºç£å—è‹¦æ—¶,æ›¾ä»¥æ¶è¨€è¾±éª‚é‚£äº›è®¥ç¬‘ä»–çš„äººã€‚', answer: 'F', hint: '(åŸºç£è¢«éª‚ä¸è¿˜å£)' },
        { id: 'tf_8', text: 'åŸºç£çš„é­ä¼¤æ˜¯ä¸ºæ‹…å½“ä¿¡å¾’çš„ç–¾ç—…ã€‚', answer: 'F', hint: '(åŒ»æ²»æ˜¯æŒ‡çµæ€§ä¸Šçš„ç—Šæ„ˆ,è€Œéå•æŒ‡èº«ä½“ç–¾ç—…)' },
        { id: 'tf_9', text: 'ä¿¡å¾’ä»¥å‰å¥½åƒç¾Šèµ°è¿·äº†è·¯,å¦‚ä»Šå´å½’åˆ°ç¾Šç¾¤ä¸­çš„ç‰§äººäº†ã€‚', answer: 'F', hint: '(æ˜¯å½’åˆ°ä½ ä»¬çµé­‚çš„ç‰§äººç›‘ç£äº†)' },
        { id: 'tf_10', text: 'å½¼å¾—è¯´,å—å†¤å±ˆä¹‹è‹¦è€Œå¿è€æ˜¯å¯å–œçˆ±çš„ã€‚', answer: 'T' }
    ];

    // 3. Matching Concepts Options & Data (10 é¢˜)
    const m1_options = [
        { value: ' ', text: '-- è¯·é€‰æ‹© --' }, { value: 'A', text: 'A. çº¯å‡€çš„çµå¥¶' }, { value: 'B', text: 'B. ä½œåœ£æ´çš„ç¥­å¸' }, 
        { value: 'C', text: 'C. å±è‚‰ä½“çš„ç§æ¬²' }, { value: 'D', text: 'D. åƒè¿·è·¯çš„ç¾Š' }, { value: 'E', text: 'E. åœ¨æ•™å¤–äººä¸­' }, 
        { value: 'F', text: 'F. ä¸€åˆ‡çš„æ¶æ¯’ã€è¯¡è¯ˆã€å‡å–„ã€å«‰å¦’å’Œä¸€åˆ‡æ¯è°¤çš„è¯' }, { value: 'G', text: 'G. å‘ç½ªæ­»,å‘ä¹‰æ´»' }, 
        { value: 'H', text: 'H. å®£æ‰¬ç¥çš„ç¾å¾·' }, { value: 'I', text: 'I. ä¸ºä¸»çš„ç¼˜æ•…' }, { value: 'J', text: 'J. åœ¨ç¥çœ‹æ¥æ˜¯å¯å–œçˆ±çš„' }
    ];
    const m1_questions_data = [
        { id: 'm1_1', concept: 'è¦è„±å»çš„æ¶è¡Œ', answer: 'F', options: m1_options },
        { id: 'm1_2', concept: 'è¦çˆ±æ…•çš„äº‹ç‰©', answer: 'A', options: m1_options },
        { id: 'm1_3', concept: 'ä¿¡å¾’è¢«æ¥çº³åå»ºé€ çš„ç”¨é€”', answer: 'B', options: m1_options },
        { id: 'm1_4', concept: 'è¢«æ‹£é€‰çš„æ—ç±»çš„ç›®çš„', answer: 'H', options: m1_options },
        { id: 'm1_5', concept: 'ä¿¡å¾’è¦ç¦æˆ’çš„å¯¹è±¡', answer: 'C', options: m1_options }, 
        { id: 'm1_6', concept: 'ä¿¡å¾’åº”æœ‰çš„è¡Œä¸ºè§è¯åœ°ç‚¹', answer: 'E', options: m1_options },
        { id: 'm1_7', concept: 'æœä»äººåˆ¶åº¦çš„åŸå› ', answer: 'I', options: m1_options },
        { id: 'm1_8', concept: 'å—è‹¦è€Œå¿è€çš„å¥–èµ', answer: 'J', options: m1_options },
        { id: 'm1_9', concept: 'åŸºç£æ‹…å½“ç½ªçš„ç›®çš„', answer: 'G', options: m1_options },
        { id: 'm1_10', concept: 'ä¿¡å¾’æœªå½’ä¸»å‰çš„çŠ¶æ€', answer: 'D', options: m1_options }
    ];

    // 4. Matching Scripture Options & Data (10 é¢˜)
    const m2_options = [
        { value: ' ', text: '-- è¯·é€‰æ‹© --' }, 
        { value: 'A', text: 'A. ä½†ä½ ä»¬è‹¥å› è¡Œå–„å—è‹¦,èƒ½å¿è€,è¿™åœ¨ç¥çœ‹æ˜¯å¯å–œçˆ±çš„ã€‚' }, 
        { value: 'B', text: 'B. å¯ä»¥å µä½é‚£ç³Šæ¶‚æ— çŸ¥äººçš„å£' },
        { value: 'C', text: 'C. è‚‰ä½“çš„ç§æ¬²' },
        { value: 'D', text: 'D. æˆ–æ˜¯åœ¨ä¸Šçš„å›ç‹,æˆ–æ˜¯å›ç‹æ‰€æ´¾ç½šæ¶èµå–„çš„è‡£å®°ã€‚' },
        { value: 'E', text: 'E. ä¹ƒæ˜¯å±ç¥çš„å­æ°‘' },
        { value: 'F', text: 'F. ä½¿æˆ‘ä»¬æ—¢ç„¶åœ¨ç½ªä¸Šæ­»,å°±å¾—ä»¥åœ¨ä¹‰ä¸Šæ´»ã€‚' },
        { value: 'G', text: 'G. è¢«å»ºé€ æˆä¸ºçµå®«,ä½œåœ£æ´çš„ç¥­å¸' },
        { value: 'H', text: 'H. å«ä½ ä»¬å› æ­¤æ¸é•¿' },
        { value: 'I', text: 'I. åªå°†è‡ªå·±äº¤æ‰˜é‚£æŒ‰å…¬ä¹‰å®¡åˆ¤äººçš„ä¸»' },
        { value: 'J', text: 'J. ä¸ä½†é¡ºæœé‚£å–„è‰¯æ¸©å’Œçš„,å°±æ˜¯é‚£ä¹–åƒ»çš„ä¹Ÿè¦é¡ºæœã€‚' }
    ];
    const m2_questions_data = [
        { id: 'm2_1', concept: 'å°±è¦çˆ±æ…•é‚£çº¯å‡€çš„çµå¥¶,', answer: 'H', options: m2_options },
        { id: 'm2_2', concept: 'ä½ ä»¬æ¥åˆ°ä¸»é¢å‰,ä¹Ÿå°±åƒæ´»çŸ³,', answer: 'G', options: m2_options },
        { id: 'm2_3', concept: 'ä½ ä»¬æ˜¯è¢«æ‹£é€‰çš„æ—ç±»,å›å°Šçš„ç¥­å¸,åœ£æ´çš„å›½åº¦,', answer: 'E', options: m2_options },
        { id: 'm2_4', concept: 'ä½ ä»¬æ˜¯å®¢æ—…,æ˜¯å¯„å±…çš„ã€‚æˆ‘åŠä½ ä»¬è¦ç¦æˆ’', answer: 'C', options: m2_options },
        { id: 'm2_5', concept: 'ä½ ä»¬ä¸ºä¸»çš„ç¼˜æ•…,è¦é¡ºæœäººçš„ä¸€åˆ‡åˆ¶åº¦,', answer: 'D', options: m2_options },
        { id: 'm2_6', concept: 'ä½ ä»¬è¡Œå–„,', answer: 'B', options: m2_options },
        { id: 'm2_7', concept: 'ä½ ä»¬åšä»†äººçš„,å‡¡äº‹è¦å­˜æ•¬ç•çš„å¿ƒé¡ºæœä¸»äºº;', answer: 'J', options: m2_options },
        { id: 'm2_8', concept: 'ä½ ä»¬è‹¥å› çŠ¯ç½ªå—è´£æ‰“,èƒ½å¿è€,æœ‰ä»€ä¹ˆå¯å¤¸çš„å‘¢?', answer: 'A', options: m2_options },
        { id: 'm2_9', concept: 'ä»–è¢«éª‚ä¸è¿˜å£,å—å®³ä¸è¯´å¨å“çš„è¯,', answer: 'I', options: m2_options },
        { id: 'm2_10', concept: 'ä»–è¢«æŒ‚åœ¨æœ¨å¤´ä¸Š,äº²èº«æ‹…å½“äº†æˆ‘ä»¬çš„ç½ª,', answer: 'F', options: m2_options }
    ];
    
    // --- åŠ¨æ€ç”Ÿæˆå‡½æ•° (Initialization) ---

    // **æ­¤å‡½æ•°æ˜¯å…³é”®ï¼šæ£€æŸ¥ç¡®ä¿æ‰€æœ‰å…ƒç´ éƒ½è¢«æ­£ç¡®æ’å…¥åˆ°DOMä¸­**
    function generateMcQuestions() {
        const list = document.getElementById('mc-list');
        list.innerHTML = ''; // æ¸…ç©ºå†…å®¹ä»¥é˜²é‡å¤åŠ è½½
        mc_questions_data.forEach(q => {
            const li = document.createElement('li');
            li.innerHTML = `
                <div class="question-item">
                    <span class="question-text">${q.text}</span>
                    <div class="choices">
                        ${Object.keys(q.options).map(key => `
                            <input type="radio" id="${q.id}_${key}" name="${q.id}" value="${key}" onchange="checkMcQuestion('${q.id}')">
                            <label for="${q.id}_${key}">${key}. ${q.options[key]}</label>
                        `).join('')}
                    </div>
                    <div class="result-area">
                        <span class="result" id="res_${q.id}"></span>
                        <div class="answer-prompt" id="ans_${q.id}"></div>
                    </div>
                </div>
            `;
            list.appendChild(li);
        });
    }

    function generateTfQuestions() {
        const list = document.getElementById('tf-list');
        list.innerHTML = '';
        tf_questions_data.forEach(q => {
            const li = document.createElement('li');
            li.innerHTML = `
                <div class="question-item">
                    <span class="question-text">${q.text}</span>
                    <div class="true-false">
                        <input type="radio" id="${q.id}_t" name="${q.id}" value="T" onchange="checkTfQuestion('${q.id}')"><label for="${q.id}_t">æ˜¯ (T)</label>
                        <input type="radio" id="${q.id}_f" name="${q.id}" value="F" onchange="checkTfQuestion('${q.id}')"><label for="${q.id}_f">é (F)</label>
                    </div>
                    <div class="result-area">
                        <span class="result" id="res_${q.id}"></span>
                        <div class="answer-prompt" id="ans_${q.id}"></div>
                    </div>
                </div>
            `;
            list.appendChild(li);
        });
    }

    function generateMatchingTables(data, tbodyId) {
        const tbody = document.getElementById(tbodyId);
        tbody.innerHTML = '';
        data.forEach((item, index) => {
            const row = tbody.insertRow();
            row.className = 'matching-row';

            // 1. # Column
            row.insertCell().textContent = index + 1;

            // 2. Concept/Left Scripture Column
            row.insertCell().textContent = item.concept;

            // 3. Dropdown Column
            const selectCell = row.insertCell();
            const select = document.createElement('select');
            select.name = item.id;
            select.id = item.id;
            select.onchange = function() { checkMatchingQuestion(item.id, data); };
            
            // Populate options
            item.options.forEach(option => {
                const opt = document.createElement('option');
                opt.value = option.value;
                opt.textContent = option.text;
                select.appendChild(opt);
            });
            selectCell.appendChild(select);

            // 4. Result Column (Result and Answer Prompt combined)
            const resultCell = row.insertCell();
            resultCell.innerHTML = '<span class="result" id="res_' + item.id + '"></span><div class="answer-prompt" id="ans_' + item.id + '"></div>';
        });
    }

    // --- æ ¸å¿ƒå³æ—¶è¯„åˆ†å‡½æ•° (Central On-the-fly Checking Logic) ---

    function checkQuestion(questionId, data, isMatching = false) {
        const question = data.find(q => q.id === questionId);
        if (!question) return;
        
        const resultElement = document.getElementById(`res_${questionId}`);
        const promptElement = document.getElementById(`ans_${questionId}`);
        
        let selectedValue;

        if (isMatching) {
            const select = document.getElementById(questionId);
            selectedValue = select ? select.value : null;
        } else {
            const selected = document.querySelector(`input[name="${questionId}"]:checked`);
            selectedValue = selected ? selected.value : null;
        }

        resultElement.textContent = '';
        resultElement.className = 'result';
        promptElement.innerHTML = '';
        
        if (!selectedValue || selectedValue === ' ') return;

        // Check Answer
        if (selectedValue === question.answer) {
            resultElement.textContent = 'âœ”';
            resultElement.classList.add('correct');
        } else {
            resultElement.textContent = 'âœ˜';
            resultElement.classList.add('incorrect');
            
            let correctAnswerText = '';

            if (isMatching) {
                const correctOption = question.options.find(opt => opt.value === question.answer);
                correctAnswerText = correctOption ? correctOption.text : `(${question.answer})`;
            } else if (question.options) { 
                correctAnswerText = `${question.answer}. ${question.options[question.answer]}`;
            } else { 
                correctAnswerText = question.answer === 'T' ? 'æ˜¯ (T)' : 'é (F)';
            }
            
            let prompt = `æ­£ç¡®ç­”æ¡ˆ: ${correctAnswerText}`;
            if (question.hint) { prompt += `<br>æç¤º: ${question.hint}`; }
            promptElement.innerHTML = prompt;
        }
    }

    // Wrappers for clarity
    function checkMcQuestion(questionId) { checkQuestion(questionId, mc_questions_data); }
    function checkTfQuestion(questionId) { checkQuestion(questionId, tf_questions_data); }
    function checkMatchingQuestion(questionId, data) { checkQuestion(questionId, data, true); }
    
    // --- æœ€ç»ˆåˆ†æ•°å‡½æ•° (Final Score) ---

    function showFinalScore() {
        let correct_count = 0;
        const all_data = [...mc_questions_data, ...tf_questions_data, ...m1_questions_data, ...m2_questions_data];
        let total_questions = all_data.length;

        // Check all questions
        all_data.forEach(q => {
            let selectedValue;
            if (q.id.startsWith('mc_') || q.id.startsWith('tf_')) {
                const selected = document.querySelector(`input[name="${q.id}"]:checked`);
                selectedValue = selected ? selected.value : null;
            } else { // Matching
                const select = document.getElementById(q.id);
                selectedValue = select ? select.value : null;
            }

            if (selectedValue === q.answer) {
                correct_count++;
            }
        });

        // Display score
        const scoreSummary = document.getElementById('score-summary');
        const scorePercentage = ((correct_count / total_questions) * 100).toFixed(1);
        scoreSummary.innerHTML = `ğŸ‰ æµ‹éªŒå®Œæˆï¼æ€»è®¡ ${total_questions} é¢˜ã€‚å¾—åˆ†ï¼š <span style="color:#27ae60;">${correct_count}</span> / ${total_questions} (<b>${scorePercentage}%</b>)ã€‚`;
        scoreSummary.style.display = 'block';
        
        // Scroll to result
        scoreSummary.scrollIntoView({ behavior: 'smooth' });
    }

    // Page Load: ç¡®ä¿åœ¨DOMå®Œå…¨åŠ è½½åè¿è¡Œç”Ÿæˆå‡½æ•°
    document.addEventListener('DOMContentLoaded', () => {
        generateMcQuestions();
        generateTfQuestions();
        generateMatchingTables(m1_questions_data, 'matching-body-1');
        generateMatchingTables(m2_questions_data, 'matching-body-2');
    });
</script>
</body>
</html>